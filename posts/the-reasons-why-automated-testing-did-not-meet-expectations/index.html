<!DOCTYPE html>
<html>
<head>
    <title>为什么我们做不好自动化测试？ // Jace&#39;s Blog</title>

        <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">
        <meta property="og:title" content="为什么我们做不好自动化测试？" />
    <meta property="og:description" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:url" content="https://blog.xuh.me/posts/the-reasons-why-automated-testing-did-not-meet-expectations/" />
    

    <link href="" rel="alternate" type="application/rss+xml" title="Jace&#39;s Blog" />
    <link rel="shortcut icon" href="/favicon.png">

    <link href="https://blog.xuh.me/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
    <link href="https://blog.xuh.me/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="https://blog.xuh.me/css/style.css">

    <meta name="generator" content="Hugo 0.55.3" />
</head>


<body>
<div id="container">
    <header id="header">
    <div id="header-outer" class="outer">
        <div id="header-inner" class="inner">
            <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
            <a id="logo" class="logo-text" href="https://blog.xuh.me/">Jace&#39;s Blog</a>
            <nav id="main-nav">
                
                <a class="main-nav-link" href="/">Home</a>
                
                <a class="main-nav-link" href="/posts">Posts</a>
                
                <a class="main-nav-link" href="/tags">Tags</a>
                
            </nav>
            <nav id="sub-nav">
                <div id="search-form-wrap">
                </div>
            </nav>
        </div>
    </div>
</header>

    <section id="main" class="outer">
        <article class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        <header class="article-header">
            <h1 class="article-title" itemprop="name">为什么我们做不好自动化测试？</h1>
        </header>
        
        <div class="article-meta">
            <a href="/posts/the-reasons-why-automated-testing-did-not-meet-expectations/" class="article-date">
                <time datetime='2020-03-10T10:00:21.000&#43;08:00' itemprop="datePublished">2020-03-10</time>
            </a>
            
            
            
        </div>
        <div class="article-entry" itemprop="articleBody">
            

<h2 id="1-自动化测试落地状况">1. 自动化测试落地状况</h2>

<p>如果让两个相互不认识的、来自于不同公司的测试工程师自由讨论，我猜他俩寒暄的第一个问题会是：你们公司的自动化是怎么做的？如果你去问一个来自于大厂的质量部门的测试架构师：你家的测试平台有什么功能？你能听各种天花乱坠的功能、自动化能力，让你叹为观止。而同时让你去问该厂的某个业务测试工程师：你们的自动化测试做的怎么样？对方很有可能会告诉你：啥？自动化？哪有什么自动化！</p>

<p>很有意思的现象，是吧？今天我不谈怎么写代码了，来聊个在绝大多数公司都存在的、而且很可能不愿意被外人知晓的问题：<strong>为什么我们公司/产品/项目的自动化测试做不起来？</strong></p>

<p><img src="https://my-storage.oss-cn-shanghai.aliyuncs.com/picgo/20200305175034.png" alt="" /></p>

<p>上面提到的<strong>自动化测试做不起来</strong>，本质上就是<strong>自动化测试体系难以落地</strong>，那怎么才叫落地呢，以我的经验来看，需要同时具备以下四点：</p>

<ol>
<li>有统一的测试框架、平台</li>
<li>有基本的CI、CD流程，具备自动、定时触发执行的能力</li>
<li>自动化测试用例覆盖度高，能切实有效地帮助测试人员回归，明显地提高测试效率</li>
<li>测试、开发人员认同自动化测试执行的结果</li>
</ol>

<p>难吗？感觉要求其实并不高，但你跟同行去聊聊的话，你会发现要完成这四点是件不容易的的事情。下面我尝试从测试人员、研发体系（公司）维度来剖析下，来讲讲为什么难，为什么自动化测试体系落地这么困难。</p>

<h2 id="2-测试工程师">2. 测试工程师</h2>

<h3 id="2-1-编码能力是稀缺技能">2.1 编码能力是稀缺技能</h3>

<p>中国软件测试起步比较晚，测试工程师这个职业很有可能是伴随着“软件外包”兴起的（请勿考古）。早期的测试工程师清一色地做着功能（手工）测试，不需要有编码能力，甚至觉得不用会编码是理所应当的。（2019年我校招时发现还有这样的论调）</p>

<p>之后逐渐出现了能用QTP或者Rational Robot做自动化的人，这些人几乎站在了那时测试职业食物链的顶端，睥睨群雄。我还记得，十几年前读大学那会，我在一家软件公司实习的时候，当时的主管向我介绍QTP，一脸的崇拜的样子。那时能应用QTP主要依赖它强大的录制、回放能力，大部分人自动化测试依然不需要会写代码，能简单修改简单生成的vbs即可。</p>

<p>测试人员逐渐接受编码技能，应该是从web2.0概念盛行后，大量的项目需要使用开源的<code>selenium</code>、<code>watir</code>进行自动化测试，自动化测试的需求越来越旺盛，一些有好奇心的测试人员开始学习编码做自动化测试，也有部分开发人员选择转行做专职的自动化测试。</p>

<p>不过十年过去了，时至今日，编码能力依然是普通测试工程师的稀缺技能：目前软件测试从业人员中，还是有非常大比例的纯功能测试，虽然他们大部分都想学一门编程语言，但是大多就是停留在<strong>想学</strong>的程度，所付出的努力并没有带来实质的改变。</p>

<p>现如今的自动化测试技术栈，不管是接口、web、移动端，绝大多数都是基于开源项目来构建，不再有<code>QTP</code>那样 的录制回放能力，没有编码能力自然无法实施自动化测试。</p>

<h3 id="2-2-找不到切入点">2.2 找不到切入点</h3>

<p>当测试工程师掌握编码能力后下场写自动化测试了，会面临下一个问题：我该怎么从头开始做自动化？</p>

<p>困惑于不知道选什么样的测试框架、工具，困惑于不知道从接口、Web、移动端哪一层入手。简言之，找不到切入点。</p>

<h4 id="2-2-1-框架选型">2.2.1 框架选型</h4>

<p>先提一个很不好的现象：<strong>很多测试人员学习编码是从学习测试框架切入的，比如selenium、appium，他们所具备的编码能力只局限于这些框架API；而不是先学习编程语言、再学习测试类库这样的路径。</strong></p>

<p>所以这样来，测试人员大多只能从自己熟悉的框架着手，而不能全盘考虑各类框架优劣势：</p>

<ul>
<li>做web自动化，只能想到Selenium</li>
<li>做移动端，大概率会选appium</li>
<li>做接口，postman、jmeter</li>
</ul>

<p>所以这样来，其实也不存在<strong>框架选型</strong>的困扰：技能点就点了一下，没得选。</p>

<h4 id="2-2-2-分层选型">2.2.2 分层选型</h4>

<p>然后是测试分层，其实测试分层是个比较大的话题，单元、集成、接口、UI都可以切入。大部分测试文章都推崇<strong>金字塔</strong>分层模型，一张经典的图：</p>

<p><img src="https://my-storage.oss-cn-shanghai.aliyuncs.com/picgo/20200306113209.png" alt="" /></p>

<p>在你具备足够的能力下，我当然建议你把自动化测试下沉到底层去，实现更高的ROI。</p>

<p><strong>不过我觉得金字塔分层模型过于理想化，单元测试的难度也不小，在微服务架构下，我更推崇的是橄榄球分层模型，即尽可能接口测试先行：</strong></p>

<p><img src="https://my-storage.oss-cn-shanghai.aliyuncs.com/picgo/20200306113632.png" alt="" /></p>

<h3 id="2-3-重视框架-平台开发-不重用例覆盖率">2.3 重视框架、平台开发，不重用例覆盖率</h3>

<p>再来说一个怪像：如果你留意下一些测试社区，里面有非常多讨论开发测试框架、平台的帖子，也会有很多分享自造轮子的帖子，但如果你想找一些自动化用例设计的帖子，却发现非常的少。</p>

<p>我面试过很多写过测试平台的候选人，这样的面试里我很喜欢问：你的平台上有多少用例？测试覆盖率怎么样？这个时候大部分人就卡壳了，有些支支吾吾说不上来，有些能说上来，只是自动化用例的数量比较少，几十、一两百，整体的测试覆盖率非常低。</p>

<p>似乎大多数测试开发工程师的心态是：我能写代码我厉害，测试框架、平台信手拈来，至于填充用例这种体力活跟我没关系。</p>

<p><strong>殊不知，自动化测试体系的核心资产绝对是测试用例，而不是那些烂代码堆砌出来的测试框架、平台</strong>。</p>

<h3 id="2-4-用例代码bug比项目bug还多">2.4 用例代码Bug比项目Bug还多</h3>

<p>这又是一个让测试工程师很尴尬的事情，因为代码功底问题，有时候一个简单的用例几行代码里能出一堆Bug，结果测试结果完全没有可信度。</p>

<blockquote>
<p>不要不信，我抛一个简单的问题：如果一个分页查询接口，它的响应报文中<code>total</code>字段表示匹配记录总数，<code>data</code>字段值是一个数组，返回当前页匹配记录条数，你会怎么校验<code>total</code>的值的正确性？</p>
</blockquote>

<p>对于这种情况，也没什么太多可说的，不断去强化你的代码能力，而且心态上有改变：<strong>不要觉得自己是会写代码的测试，觉得比功能测试强；当你在写代码了， 应该像开发一样要求自己，要求自己的代码。</strong></p>

<p>不仅去学测试框架，更要去学数据结构、设计模式、数据库、中间件…</p>

<p>另外，在开发测试用例时，严格遵守FIRST原则：</p>

<p><img src="https://my-storage.oss-cn-shanghai.aliyuncs.com/picgo/20200309202844.jpg" alt="we" /></p>

<p><img src="https://my-storage.oss-cn-shanghai.aliyuncs.com/picgo/20200310102547.png" alt="" /></p>

        </div>

        
        
        <div class="article-toc" style="display:none;">
            <h3>Contents</h3>
            <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#1-自动化测试落地状况">1. 自动化测试落地状况</a></li>
<li><a href="#2-测试工程师">2. 测试工程师</a>
<ul>
<li><a href="#2-1-编码能力是稀缺技能">2.1 编码能力是稀缺技能</a></li>
<li><a href="#2-2-找不到切入点">2.2 找不到切入点</a>
<ul>
<li><a href="#2-2-1-框架选型">2.2.1 框架选型</a></li>
<li><a href="#2-2-2-分层选型">2.2.2 分层选型</a></li>
</ul></li>
<li><a href="#2-3-重视框架-平台开发-不重用例覆盖率">2.3 重视框架、平台开发，不重用例覆盖率</a></li>
<li><a href="#2-4-用例代码bug比项目bug还多">2.4 用例代码Bug比项目Bug还多</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
        </div>
        
        

        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.slim.min.js" integrity="sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc=" crossorigin="anonymous"></script>
        <script>
            (function() {
                var $toc = $('#TableOfContents');
                if ($toc.length > 0) {
                    var $window = $(window);

                    function onScroll(){
                        var currentScroll = $window.scrollTop();
                        var h = $('.article-entry h1, .article-entry h2, .article-entry h3, .article-entry h4, .article-entry h5, .article-entry h6');
                        var id = "";
                        h.each(function (i, e) {
                            e = $(e);
                            if (e.offset().top - 10 <= currentScroll) {
                                id = e.attr('id');
                            }
                        });
                        var active = $toc.find('a.active');
                        if (active.length == 1 && active.eq(0).attr('href') == '#' + id) return true;

                        active.each(function (i, e) {
                            $(e).removeClass('active').siblings('ul').hide();
                        });
                        $toc.find('a[href="#' + id + '"]').parentsUntil('#TableOfContents').each(function (i, e) {
                            $(e).children('a').addClass('active').siblings('ul').show();
                        });
                    }

                    $window.on('scroll', onScroll);
                    $(document).ready(function() {
                        $toc.find('a').parent('li').find('ul').hide();
                        onScroll();
                        document.getElementsByClassName('article-toc')[0].style.display = '';
                    });
                }
            })();
        </script>
        

        
        <footer class="article-footer">
            <ul class="article-tag-list">
                
                <li class="article-tag-list-item">
                    <a class="article-tag-list-link" href="https://blog.xuh.me//tags/%E6%B5%8B%E8%AF%95%E7%AE%A1%E7%90%86">测试管理
                    </a>
                </li>
                
                <li class="article-tag-list-item">
                    <a class="article-tag-list-link" href="https://blog.xuh.me//tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95">自动化测试
                    </a>
                </li>
                
            </ul>
        </footer>
        
        <nav id="article-nav">
    
    
    <a href="/posts/concurrency-models-of-loucst-jmeter-ab/" id="article-nav-older" class="article-nav-link-wrap">
        <div class="article-nav-title">聊聊ab、wrk、JMeter、Locust这些压测工具的并发模型差别&nbsp;<span>&gt;</span></div>
    </a>
    
</nav>


        
        <script src="https://utteranc.es/client.js"
            repo="jacexh/comments"
            issue-term="pathname"
            label="blog"
            theme="github-light"
            crossorigin="anonymous"
            async>
        </script>
        
    </div>
</article>

        
    </section>
    <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2020 jacexh
            <br />
            Powered by <a href="https://gohugo.io" target="_blank">Hugo</a> with theme <a href="https://github.com/carsonip/hugo-theme-minos" target="_blank">Minos</a>
        </div>
    </div>
    

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/atom-one-dark.min.css" integrity="sha256-GA29iW/iYj9FcuQQktvW45pRzHvZeFfgeFvA4tGVjpM=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    <script>
        document.getElementById('main-nav-toggle').addEventListener('click', function () {
            var header = document.getElementById('header');
            if (header.classList.contains('mobile-on')) {
                header.classList.remove('mobile-on');
            } else {
                header.classList.add('mobile-on');
            }
        });
    </script>
</footer>

</div>
</body>
</html>
